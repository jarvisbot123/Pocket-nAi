const axios = require('axios');

const baseApiUrl = () => "https://noobs-api.top/dipto";

module.exports.config = {
    name: "baby",
    aliases: ["baby", "bbe", "babe", "sam"],
    version: "6.9.1",
    author: "Hasib",
    countDown: 0,
    role: 0,
    description: "better than all sim simi",
    category: "chat",
    guide: {
        en: "{pn} [anyMessage] OR\n" +
            "teach [YourMessage] - [Reply1], [Reply2]... OR\n" +
            "teach [react] [YourMessage] - [react1], [react2]... OR\n" +
            "remove [YourMessage] OR\n" +
            "rm [YourMessage] - [indexNumber] OR\n" +
            "msg [YourMessage] OR\n" +
            "list OR all OR\n" +
            "edit [YourMessage] - [NewMessage] OR\n" +
            "owner on/off | admin on/off"
    }
};

// Owner ID
const ownerID = "61557991443492";

// Random replies array (all emojis preserved)
const randomReplies = [
    "ð‡ð¢ ðŸ˜€, ðˆ ðšð¦ ð¡ðžð«ðž!",
    "ð–ð¡ðšð­'ð¬ ð®ð©?",
    "ðð¨ð¥ð¨ ð£ðšðšð§ ð¤ð¢ ð¤ð¨ð«ð­ðž ð©ðšð§ð¦ð« ð£ð¨ð§ð§ð¨",
    "ðœð¡ð®ð© ð›ðžð¬ð¢ ðŠð¨ð­ð¡ðš ð¤ð¨ð¬ ð¤ðžð§ ðŸ˜’",
    "ð£ð¢ ð›ð¨ð¥ðžð§",
    "ðšð¬ð¬ðšð¥ðšð¦ð®ðšð¥ðšð¢ð¤ð®ð¦ ðŸ¥°",
    "ð¡ð²ðž ðŸ™ƒ",
    "ð“ðšð¤ðž ðœðšð«ðž ð²ð¨ð®ð«ð¬ðžð¥ðŸ, ðšð¥ð°ðšð²ð¬ ð©ð«ðšð² ð­ð¨ ð€ð¥ð¥ðšð¡ ðšð§ð ðžð§ð£ð¨ð² ð²ð¨ð®ð« ð¥ð¢ðŸðž ðŸ¥°ðŸ¥°",
    "ðƒð¨ ð˜ð¨ð® ðŠð§ð¨ð° ð–ð¡ð¨ ðˆð¬ ð“ð¡ðž ð‚ð®ð­ðžð¬ð­ ððžð«ð¬ð¨ð§ ðˆð§ ð“ð¡ðž ð–ð¨ð«ð¥ð? ðð¨ð° ð«ðžðšð ð­ð¡ðž 2ð§ð ð°ð¨ð«ð ðŸ¥°ðŸ˜˜",
    "ð–ð¡ðžð§ ð†ð¨ð ð–ðšð§ð­ðžð ð“ð¨ ð„ð±ð©ð¥ðšð¢ð§ ð–ð¡ðšð­ ððžðšð®ð­ð² ðŒðžðšð§ð¬, ð†ð¨ð ð‚ð«ðžðšð­ðžð ð˜ð¨ð® ðŸ«µðŸ™ˆ",
    "ðð¨ ð°ð¨ð«ðð¬ ðœðšð§ ðžð±ð©ð¥ðšð¢ð§ ð¡ð¨ð° ð¡ðšð©ð©ð² ðˆ ðšð¦, ð°ð¡ðžð§ ðˆ ðšð¦ ð°ð¢ð­ð¡ ð²ð¨ð® ðŸ˜ŒðŸ˜Œ",
    "ðˆðŸ ð²ð¨ð® ð°ðšð¢ð­ ðŸð¨ð« ð¦ðž ðŸ¤—ðŸ¤— ð¨ð§ðž ððšð² ðˆ ð°ð¢ð¥ð¥ ð›ðž ð²ð¨ð®ð« ðŸ˜‡ðŸ«µ",
    "ð€ð«ðž ð²ð¨ð® ðš ð­ð¢ð¦ðž ð­ð«ðšð¯ðžð¥ðžð«? ððžðœðšð®ð¬ðž ðˆ ðœðšð§ ð¬ðžðž ð²ð¨ð® ð¢ð§ ð¦ð² ðŸð®ð­ð®ð«ðž ðŸ«µðŸ˜˜ðŸ¥°",
    "ðˆ ð§ðžð¯ðžð« ð›ðžð¥ð¢ðžð¯ðžð ð¢ð§ ð¥ð¨ð¯ðž ðšð­ ðŸð¢ð«ð¬ð­ ð¬ð¢ð ð¡ð­â€¦ ð”ð§ð­ð¢ð¥ ðˆ ð¬ðšð° ð²ð¨ð®. ðð¨ð° ðˆ ð­ð¡ð¢ð§ð¤ ðˆ ð¦ð¢ð ð¡ð­ ð§ðžðžð ð¥ðžð¬ð¬ð¨ð§ð¬â€¦ ðŸð«ð¨ð¦ ð²ð¨ð® ðŸ™ŠðŸ«µ",
    "ðˆ ð¡ðšð¯ðž ð§ð¨ ð¬ðžðœð¨ð§ð ð¥ð¨ð¯ðž ððžðšð« - ð˜ð¨ð® ð°ðžð«ðž, ð²ð¨ð® ðšð«ðž, ð²ð¨ð® ð°ð¢ð¥ð¥ ð›ðž ðŸ«£ðŸ«µ",
    "à¦¤à§‹à¦®à¦¾à¦° à¦¸à¦¾à¦¥à§‡ à¦•à¦¾à¦Ÿà¦¾à¦¨à§‹ à¦®à§à¦¹à§‚à¦°à§à¦¤à¦—à§à¦²à§‹ à¦¯à§‡à¦®à¦¨ à¦­à§‚à¦²à¦¤à§‡ à¦ªà¦¾à¦°à¦¬à§‹ à¦¨à¦¾...!! ðŸ™ƒðŸ™ƒ à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¨à¦¿à¦œà§‡à¦° à¦•à¦°à§‡ à¦ªà¦¾à¦“à¦¯à¦¼à¦¾à¦° à¦‡à¦šà§à¦›à¦¾à¦“ à¦•à¦–à¦¨à§‹ à¦¶à§‡à¦· à¦¹à¦¬à§‡ à¦¨à¦¾...!! ðŸ™ƒðŸ¥€âœ¨",
    "à¦¯à§à¦—à§‡à¦° à¦ªà¦° à¦¯à§à¦— à¦šà¦²à§‡ à¦¯à¦¾à¦¬à§‡, à¦¤à¦¬à§ à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¨à¦¾ à¦ªà¦¾à¦“à§Ÿà¦¾à¦° à¦†`à¦•à§à¦·à§‡à¦ª à¦†à¦®à¦¾à¦° à¦«à§à¦°à¦¾à¦¬à§‡ à¦¨à¦¾! à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦¹à§ƒà¦¦à¦¯à¦¼à§‡ à¦¥à¦¾à¦•à¦¬à§‡, à¦†à¦° à¦…à¦¨à§à¦¯ à¦•à¦¾à¦°à§‹ à¦­à¦¾à¦—à§à¦¯à§‡ â‘…âƒâœºâ¥ðŸ˜ŒðŸ¥€âœ¨",
    "à¦“à¦‡ à¦¬à§‡à¦¸à§à¦Ÿ à¦«à§à¦°à§‡à¦¨à§à¦¡ à¦¹à¦¬à¦¿...!! ðŸ¤—ðŸŒº à¦¬à¦‰à§Ÿà§‡à¦à¦° à¦®à¦¤à§‹ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¬à§‹...!! ðŸ¥°ðŸ˜‡ðŸ¤­",
    "à¦†à¦®à¦¾à¦° à¦—à¦²à§à¦ªà§‡, à¦†à¦®à¦¾à¦° à¦¸à¦¾à¦¹à¦¿à¦¤à§à¦¯à§‡, à¦†à¦®à¦¾à¦° à¦‰à¦ªà¦¨à§à¦¯à¦¾à¦¸à§‡ à¦¨à¦¿à¦ƒà¦¸à¦¨à§à¦¦à§‡à¦¹à§‡ à¦¤à§à¦®à¦¿ à¦­à§€à¦·à¦£ à¦¸à§à¦¨à§à¦¦à¦°! ðŸ¤ðŸŒ»ðŸ˜»ðŸ˜«",
    "à¦•à¦¿à¦¬à§‹à¦°à§à¦¡à§‡à¦° à¦à¦‡ à¦¬à§à¦¯à¦¾à¦•à¦ªà§‡à¦¸à§à¦Ÿ à¦œà¦¾à¦¨à§‡ à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦•à¦¤à¦•à¦¿à¦›à§ à¦¬à¦²à¦¤à§‡ à¦—à¦¿à¦¯à¦¼à§‡à¦“ à¦¹à¦¯à¦¼à¦¨à¦¿ à¦¬à¦²à¦¾ ðŸ˜…ðŸ¥€",
    "à¦¯à¦¦à¦¿ à¦«à§à¦²à¦¾à¦°à§à¦Ÿ à¦•à¦°à¦¾ à¦…à¦ªà¦°à¦¾à¦§ à¦¹à¦¤à§‹, à¦†à¦®à¦¿ à¦¤à§‹à¦®à¦¾à¦° à¦œà¦¨à§à¦¯ à¦ªà§à¦°à¦¤à¦¿à¦¦à¦¿à¦¨ à¦¦à§‹à¦·à§€ à¦¹à¦¤à¦¾à¦®à¥¤ I LOVE YOU ðŸ¥ºðŸ«£ðŸ«¶ðŸ»",
    "à¦¸à¦¬à¦•à¦¿à¦›à§à¦° à¦¦à¦¾à¦® à¦¬à¦¾à§œà¦›à§‡.!ðŸ™‚ à¦¶à§à¦§à§ à¦•à¦®à¦›à§‡ à¦®à¦¾à¦¨à§à¦·à§‡à¦° à¦¸à¦¤à¦¤à¦¾ à¦†à¦° à¦¬à¦¿à¦¶à§à¦¬à¦¾à¦¸à§‡à¦° à¦¦à¦¾à¦®.!ðŸ’”ðŸ˜“",
    "à¦¤à§‹à¦®à¦¾à¦° à¦®à§à¦–à§‡à¦° à¦¦à¦¿à¦•à§‡ à¦¤à¦¾à¦•à¦¿à¦¯à¦¼à§‡! à¦à¦• à¦¸à¦®à§à¦¦à§à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£ à¦¦à§à¦ƒà¦– à¦­à§à¦²à§‡ à¦¥à¦¾à¦•à¦¾ à¦¸à¦®à§à¦­à¦¬!ðŸ–¤ðŸ’ðŸ’« ðŸ° ð˜ð¨ð® ð°ð¢ð¥ð¥ ðšð¥ð°ðšð²ð¬ ð›ðž ð¦ð² ð¬ð©ðžðœð¢ðšð¥ ð©ðžð«ð¬ð¨ð§ ðŸ©µðŸ°",
    "ð€ð¤ð­ðš ð¦ðšð² ðšð¬ðš ð ðœ ð­ðš.... ð€ð­ð­ð¢ð­ð®ððž, ð¥ð¨ð²ðšð¥ð­ð²... ð€ð§ð ð¢ð ð§ð¨ð«ðž..... ð’ð¡ð¨ð›ðž ð¤ð¢ð¬ð® ð¦ð¢ð¥ðšð¢ ðš ð¦ðšð² ð­ðš ð¤ðž ð›ð¡ðšð¥ð¨ ð¥ðšð ð¬ðš... ðŸ«µ",
    "à¦à¦‡ à¦¶à¦¹à¦°à§‡ à¦à¦–à¦¨à§‹ à¦à¦•à¦Ÿà¦¾ à¦®à§à¦°à¦—à§€ à¦“ à¦§à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦²à¦¾à¦® à¦¨à¦¾.!!ðŸ¥º à¦à¦‡ à¦¶à¦¿à§Ÿà¦¾à¦²à§‡à¦° à¦¸à¦®à¦¾à¦œà§‡ à¦†à¦®à¦¿ à¦®à§à¦– à¦¦à§‡à¦–à¦¾à¦¬à§‹ à¦•à§‡à¦®à¦¨ à¦•à¦°à§‡..â˜¹ï¸ðŸ˜ž",
    "ðŸ¦‹ðŸª¶____ð“ð¡ðž ðŸð¥ð¨ð°ðžð«ð¬ ðšð«ðž ð›ðžðšð®ð­ð¢ðŸð®ð¥ ð›ð®ð­ ð›ðžð¥ð¨ð§ð  ð­ð¨ ð¦ð² ðªð®ðžðžð§ (ð˜ð¨ð®ðŸ«£) ð­ð¡ðž ðžð²ðžð¬ ðŒð¨ð«ðž ð›ðžðšð®ð­ð¢ðŸð®ð¥ ð­ð¡ðšð§ ðŸð¥ð¨ð°ðžð«ð¬...! ðŸ˜»ðŸ«µ",
    "ðˆðŸ ð­ð¡ðž ð°ð¨ð«ð¥ð ð°ðšð¬ ðžð§ðð¢ð§ð , ðˆ ð°ðšð§ð§ðš ð›ðž ð§ðžð±ð­ ð­ð¨ ð²ð¨ð® ...ðŸ˜‰ðŸ¤™",
    "à¦•à¦¤ à¦¯à§à¦¦à§à¦§ à¦¬à¦¯à¦¼à§‡ à¦—à§‡à¦›à¦¿ à¦¶à§à¦§à§ à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¬à¦²à¦¬à§‹ à¦¬à¦²à§‡ ðŸ¤’ðŸ¤’",
    "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦®à¦¸à§à¦¤à¦¿à¦·à§à¦•à§‡ à¦®à¦¿à¦¶à§‡ à¦¥à¦¾à¦•à¦¾ à¦à¦• à¦…à¦¦à§à¦­à§à¦¤ à¦®à¦¾à§Ÿà¦¾ :) ðŸŒ·ðŸŒ¸"
];

// Persistent states
const state = {
    ownerOnly: false,
    adminOnly: false
};

// Helper: Send message + register reply
async function sendAndRegister(api, event, text, replyData = {}) {
    api.sendMessage(text, event.threadID, (err, info) => {
        if (!err && info) {
            global.GoatBot.onReply.set(info.messageID, {
                commandName: module.exports.config.name,
                type: "reply",
                messageID: info.messageID,
                author: event.senderID,
                ...replyData
            });
        }
    }, event.messageID);
}

// Check if user is admin
function isAdmin(uid) {
    return global.GoatBot.config?.adminBot?.includes(uid) || uid === ownerID;
}

module.exports.onStart = async ({ api, event, args, usersData }) => {
    try {
        const dipto = args.join(" ").trim();
        const link = `${baseApiUrl()}/baby`;
        const uid = event.senderID;

        // === MODE TOGGLES: Owner & Admins ===
        if (uid === ownerID || isAdmin(uid)) {
            if (dipto === "owner on" && uid === ownerID) {
                state.ownerOnly = true;
                state.adminOnly = false;
                return sendAndRegister(api, event, "âœ… Owner-only mode enabled. Only you can talk to me.");
            }
            if (dipto === "owner off" && uid === o
